doctype html
html(lang='ja')
    head
        meta(charset='utf-8')
        meta(name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no')
        meta(name='description' content='Visualize view for result of triathlon')
        meta(name='author' content='Fuka AMAMIYA')

        title レース名 :: Trist

        // Favicon
        link(rel='icon' type='image/webp' href='assets/favicon.ico')

        // Core theme CSS (includes Bootstrap)
        link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css')
        link(rel='stylesheet' href='css/styles.css')

        script(src='https://cdn.jsdelivr.net/npm/chart.js')
        script(src='js/scripts.js')


    body(style='background-image: url("assets/bg_body.png");')
        header(style='background-image: url("assets/trist_logo.png");')
            h1.invisible Trist
            div(data-bs-toggle='modal' data-bs-target='#navi')
                svg.touchable_icon(version='1.1' xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32')
                    use(xlink:href='assets/icon/cog.svg#root')

        nav#navi.modal
            .modal-dialog.modal-dialog-scrollable
                .modal-content
                    .modal-header 
                        .nav.nav-pills.nav-justified
                            a.nav-link.active(data-bs-toggle='tab' data-bs-target='#race-tab') Race
                            a.nav-link(data-bs-toggle='tab' data-bs-target='#member-tab') Member
                            a.nav-link.d-none(data-bs-toggle='tab' data-bs-target='#group-tab') Group
                        button.btn-close(type='button' aria-label='Close' data-bs-dismiss='modal')
                    .modal-body.tab-content 
                        .tab-pane.fade.show.active#race-tab
                            ul#race_list
                        .tab-pane.fade#member-tab
                            .d-flex
                                h5.align-self-center.me-3.mt-auto.mb-auto Add
                                label.align-self-center.flex-grow-1
                                    input#new_member_input.w-100(placeholder='名前, ゼッケン番号') 
                            ul#new_member_list.list-group.mt-2
                            h5 Members
                            ul#member_list.list-group

                        .tab-pane.fade.d-none#group-tab
                            p Sectionの選択を切り替えるようにする
                    .modal-footer.d-none 
                        p SHARE by
                            i#copy_url.icon_in_text.bi-link
                            img#share_by_x.icon_in_text(src='assets/icon/x-logo-black.png')

        .debug 
            button#redraw 再描画

            #section_controller 
                p
                    label
                        input#section_all(type="checkbox" name="section_all", checked=true)

                p
                    select#section(multiple=true, disabled=true)

        // Content section
        section#course
            h1.course_name
            #course_summary

        #view
            section.view.bg-record#view_record
                h3.course_name
                h2.marker-record 総合
                    span.distance
                .chart
                    canvas
                ul.ranking 

            section.view.bg-swim#view_swim
                h3.course_name
                h2.marker-swim スイム
                    img.icon_in_text(src='assets/icon/swim.png')
                    span.distance
                .chart
                    canvas
                ul.ranking 

            section.view.bg-bike#view_bike
                h3.course_name
                h2.marker-bike バイク
                    img.icon_in_text(src='assets/icon/bike.png')
                    span.distance
                .chart
                    canvas
                ul.ranking 

            section.view.bg-run#view_run
                h3.course_name
                h2.marker-run ラン
                    img.icon_in_text(src='assets/icon/run.png')
                    span.distance
                .chart
                    canvas
                ul.ranking
            
            section#lap_time.view.summary.d-none
                h3.course_name 
                h2.marker-lap_time ラップタイム
                #lap_time_chart(style="display: grid; \
                    grid-auto-rows: 2ex 2.7rem; \
                    row-gap: 0.1rem;")
                #lap_time_row.d-none
                    .name
                    .time_bar 
                    .time.swim 
                    .time_bar 
                    .time.bike
                    .time_bar
                    .time.run
                    .time_bar
                    .dummy 

                    .stack_bar.swim
                        img(src='assets/icon/swim.png')
                    .stack_bar.bike
                        img(src='assets/icon/bike.png')
                    .stack_bar.run
                        img(src='assets/icon/run.png')
                    .dummy
                                
            section#lap_score.view.summary.d-none
                h3.course_name 
                h2.marker-lap_time スコア
                #lap_score_chart
                    #lap_score_footer_start
                    .dummy 
                    .bar.bar-end
                    .dummy 
                    .score-bg.score-bg-l.score-bg-b 
                    .bar.bar-center.bar-end
                    .score-bg.score-bg-r.score-bg-b 
                    .dummy 
                #lap_score_row.d-none
                    .dummy 
                    .dummy 
                    .bar 
                    .dummy 
                    .score-bg.score-bg-l 
                    .bar.bar-center 
                    .score-bg.score-bg-r 
                    .dummy

                    .name

                    .picto 
                        img(src='assets/icon/swim.png')
                    .swim.stack_bar 
                    .score-bg.score-bg-l 
                    .score-bg.score-bg-r 
                    .dummy 
                    
                    .picto 
                        img(src='assets/icon/bike.png')
                    .bike.stack_bar 
                    .score-bg.score-bg-l 
                    .score-bg.score-bg-r 
                    .dummy 
                    
                    .picto 
                        img(src='assets/icon/run.png')
                    .run.stack_bar 
                    .score-bg.score-bg-l 
                    .score-bg.score-bg-r 
                    .dummy 


        // Footer
        footer.py-3(style="background-color: hsl(240deg, 80%, 8%);")
            .container
                p.m-0.text-center.text-white
                    img.img-fluid.rounded-1.me-2.mb-2.fs-4.emoji(src='assets/rotate_umbllera_2024-04-25.webp')
                    | Amamiya &copy; 2024
        
        .icons.d-none
            //- 利用するSVGアイコンすべて読み込んでおく
            .icons.d-none
                svg#icon_user-plus(version='1.1' xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32')
                    use(xlink:href='assets/icon/user-plus.svg#root')
                svg#icon_user-minus(version='1.1' xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32')
                    use(xlink:href='assets/icon/user-minus.svg#root')
                svg#icon_cog(version='1.1' xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32')
                    use(xlink:href='assets/icon/cog.svg#root')

        // Bootstrap core JS
        script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js')
